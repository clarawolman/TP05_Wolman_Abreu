@{
    ViewData["Title"] = "Sala 2 - Pociones";
}

<!-- 
CAMBIOS REALIZADOS EN ESTE ARCHIVO:

1. PROBLEMA ORIGINAL: Los inputs type="image" no enviaban correctamente los valores al controlador
2. SOLUCIÓN: Cambié a button type="submit" con imágenes dentro
3. PROBLEMA ADICIONAL: La página se iba arriba cuando se hacía clic en pociones incorrectas
4. SOLUCIÓN: Agregué JavaScript para mantener la posición de la página

CÓDIGO ANTERIOR (NO FUNCIONABA):
<input type="image" name="pocion" value="correcta" src="/img/pocion_roja.png" alt="Poción roja" class="btn-pocion">

CÓDIGO NUEVO (FUNCIONA):
<button type="submit" name="pocion" value="correcta" class="btn-pocion">
    <img src="/img/pocion_roja.png" alt="Poción roja">
</button>
-->

<section class="sala-pociones">
    <h2>El Desafío de las Pociones</h2>
    <p>Una de estas pociones te permitirá avanzar. Las otras son peligrosas.</p>

    <section class="pociones-container">
        <form method="post" asp-action="ResolverPociones" id="pocionesForm">
            <div class="pocion">
                <button type="submit" name="pocion" value="correcta" class="btn-pocion">
                    <img src="/img/pocion_roja.png" alt="Poción roja">
                </button>
            </div>
            <div class="pocion">
                <button type="submit" name="pocion" value="violeta" class="btn-pocion">
                    <img src="/img/pocion_violeta.png" alt="Poción violeta">
                </button>
            </div>                
            <div class="pocion">
                <button type="submit" name="pocion" value="amarilla" class="btn-pocion">
                    <img src="/img/pocion_amarilla.png" alt="Poción amarilla">
                </button>
            </div>
            <div class="pocion">
                <button type="submit" name="pocion" value="azul" class="btn-pocion">
                    <img src="/img/pocion_azul.png" alt="Poción azul">
                </button>
            </div>
            <div class="pocion">
                <button type="submit" name="pocion" value="verde" class="btn-pocion">
                    <img src="/img/pocion_verde.png" alt="Poción verde">
                </button>
            </div>
        </form>
    </section>

    @if (ViewBag.Mensaje != null)
    {
        <div class="mensaje-error">
            <p>@ViewBag.Mensaje</p>
        </div>
    }
</section>

<!-- JavaScript para mantener la posición de la página después del submit -->
<script>
// Mantener la posición de la página después de enviar el formulario
document.getElementById('pocionesForm').addEventListener('submit', function() {
    // Guardar la posición actual
    sessionStorage.setItem('scrollPosition', window.scrollY);
});

// Restaurar la posición cuando la página se carga
window.addEventListener('load', function() {
    var scrollPosition = sessionStorage.getItem('scrollPosition');
    if (scrollPosition) {
        window.scrollTo(0, scrollPosition);
        sessionStorage.removeItem('scrollPosition');
    }
});
</script>